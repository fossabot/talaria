kind: pipeline
name: default
steps:
- name: test
  image: golang:1.14
  commands:
  - go test -v -cover ./pkg/...
- name: docker
  image: plugins/docker
  settings:
    repo: nsmith5/talaria
    auto_tag: true
    username:
      from_secret: dockerhub_username
    password:
      from_secret: dockerhub_password
  when:
    branch:
    - master